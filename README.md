# نظام إدارة إيجارات المعدات (أوفلاين كامل)

هذا النظام يعمل الآن بالكامل بوضع أوفلاين (Offline-Only) بدون أي اتصال بخادم خارجي.
جميع البيانات تُخزن محلياً في IndexedDB داخل المتصفح/تطبيق Electron.

## المزايا الحالية

- إدارة العملاء، المعدات، الفروع، الإيجارات اليومية والشهرية.
- عقود وفواتير قابلة للطباعة.
- تقرير شامل مالي وزمني.
- إدارة الصيانة والمصروفات.
- بحث سريع في الإيجارات.
- دعم مبلغ التأمين (الوديعة) داخل العقد والفاتورة.
- لا يتطلب إنترنت إطلاقاً بعد التشغيل.

## التقنيات المستخدمة

- React 18 + TypeScript
- Vite
- Tailwind CSS + shadcn-ui
- IndexedDB عبر مكتبة `idb`
- date-fns (التنسيق باللغة العربية)
- Electron (للتعبئة كتطبيق سطح مكتب)

## التشغيل محلياً

```sh
git clone <REPO_URL>
cd EquepmentRentalSystem
npm install
npm run dev
```

يفتح التطبيق على عنوان محلي (مثلاً: http://localhost:5173) ويمكن تعبئته كتطبيق سطح مكتب عبر:

```sh
npm run electron:dev
```

## البناء للإنتاج

```sh
npm run build
```

سيتم إنشاء الملفات في مجلد `dist/` ويمكن استخدام أوامر البناء لـ Electron:

```sh
npm run electron:build:win
```

## بنية البيانات (مختصر)

- IndexedDB يخزن الجداول: customers, equipment, branches, rentals, rental_items, maintenance_requests, expenses.
- كل سجل يحتوي حقول `created_at`, `updated_at` و `synced` (حالياً دائماً أوفلاين: القيمة لا تُستخدم).

## استخدام النظام

1. سجّل مستخدم (أو أدمن) محلياً.
2. أنشئ فرع من صفحة الإعداد `Setup` إذا لم يوجد.
3. أضف معدات وعملاء.
4. أنشئ عقد إيجار ومن ثم اطبع العقد أو الفاتورة مباشرة.
5. تابع الصيانة والمصروفات والتقارير الشاملة.

## وضع الأوفلاين

تم حذف/تعطيل كل ما يتعلق بـ Supabase والمزامنة. أي بقايا مفاتيح تخزين قديمة تم توحيدها إلى `offline.*`.

## ملاحظات لاحقة محتملة

- يمكن إضافة آلية تصدير/استيراد JSON للنسخ الاحتياطي.
- يمكن إضافة فحص تناسق داخلي دوري للجداول.

## الترخيص

المشروع داخلي؛ حدّد ترخيصاً إن رغبت.

---

تم التحويل إلى أوفلاين كامل بنجاح.
